import { ReactiveFormConfig } from "./reactive-form-config";
export class ObjectMaker {
    static toJson(key, config, values, additional = {}) {
        ObjectMaker.setMessage();
        let message = config ? config.message : null;
        let messageKey = undefined;
        if (!message && config && config.messageKey)
            messageKey = config.messageKey;
        let messageText = (message) ? message : (ReactiveFormConfig && ReactiveFormConfig.json && ReactiveFormConfig.json.validationMessage && ReactiveFormConfig.json.validationMessage[messageKey || key]) ? ReactiveFormConfig.json.validationMessage[messageKey || key] : '';
        values.forEach((t, index) => {
            if (t instanceof Date)
                t = this.getDateString(t);
            messageText = messageText.replace(`{{${index}}}`, t);
        });
        if (config && config.messageNexus)
            Object.keys(config.messageNexus).forEach(propName => {
                messageText = messageText.replace(`{{${propName}}}`, config.messageNexus[propName]);
            });
        let jObject = {};
        jObject[key] = {
            message: messageText, refValues: values
        };
        if (config && config.isAddMessageKey)
            jObject["messageKey"] = messageKey;
        if (additional) {
            if (additional.min)
                jObject[key].min = additional.min;
            if (additional.max)
                jObject[key].max = additional.max;
        }
        return jObject;
    }
    static null() {
        return null;
    }
    static getPasswordMessage() {
        let messageKey = "password";
        return (ReactiveFormConfig && ReactiveFormConfig.json && ReactiveFormConfig.json.validationMessage && ReactiveFormConfig.json.validationMessage[messageKey]) ? ReactiveFormConfig.json.validationMessage[messageKey] : '';
    }
    static setMessage() {
        if (ReactiveFormConfig.i18n && ReactiveFormConfig.i18n.validationMessage && ObjectMaker.language !== ReactiveFormConfig.i18n.language) {
            if (!ReactiveFormConfig.json)
                ReactiveFormConfig.json = {};
            ReactiveFormConfig.json.validationMessage = ReactiveFormConfig.i18n.validationMessage();
            ObjectMaker.language = ReactiveFormConfig.i18n.language;
        }
    }
    static getDateString(value) {
        let seperator = ReactiveFormConfig && ReactiveFormConfig.json && ReactiveFormConfig.json.baseConfig && ReactiveFormConfig.json.baseConfig.seperator ? ReactiveFormConfig.json.baseConfig.seperator : "/";
        let dateFormat = ReactiveFormConfig && ReactiveFormConfig.json && ReactiveFormConfig.json.baseConfig && ReactiveFormConfig.json.baseConfig.dateFormat ? ReactiveFormConfig.json.baseConfig.dateFormat : "mdy";
        if (ReactiveFormConfig && ReactiveFormConfig.json && ReactiveFormConfig.json.internationalization && ReactiveFormConfig.json.internationalization.dateFormat && ReactiveFormConfig.json.internationalization.seperator) {
            seperator = ReactiveFormConfig.json.internationalization.seperator;
            dateFormat = ReactiveFormConfig.json.internationalization.dateFormat;
        }
        let result = '';
        let year = value.getFullYear().toString();
        let month = String(value.getMonth() + 1);
        let day = String(value.getDay());
        switch (dateFormat) {
            case 'ymd':
                result = "".concat(year, seperator, month, seperator, day);
                break;
            case 'dmy':
                result = "".concat(day, seperator, month, seperator, year);
                break;
            case 'mdy':
                result = "".concat(month, seperator, day, seperator, year);
                break;
        }
        return result;
    }
}
ObjectMaker.language = "";
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib2JqZWN0LW1ha2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvcmVhY3RpdmUtZm9ybS12YWxpZGF0b3JzL3V0aWwvb2JqZWN0LW1ha2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRTVELE1BQU0sT0FBTyxXQUFXO0lBRXBCLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBVyxFQUFFLE1BQVcsRUFBRSxNQUFXLEVBQUMsYUFBK0IsRUFBRTtRQUNqRixXQUFXLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDekIsSUFBSSxPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDN0MsSUFBSSxVQUFVLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUcsQ0FBQyxPQUFPLElBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxVQUFVO1lBQ3RDLFVBQVUsR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ25DLElBQUksV0FBVyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQkFBa0IsSUFBSSxrQkFBa0IsQ0FBQyxJQUFJLElBQUksa0JBQWtCLENBQUMsSUFBSSxDQUFDLGlCQUFpQixJQUFJLGtCQUFrQixDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQSxDQUFDLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ3hRLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEVBQUU7WUFDeEIsSUFBSSxDQUFDLFlBQVksSUFB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S0FBSyxLQUFLO2dCQUNOLE1BQU0sR0FBRyxFQUFFLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsQ0FBQTtnQkFDMUQsTUFBTTtTQUNiO1FBQ0QsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQzs7QUF4RU0sb0JBQVEsR0FBVyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBsaWNhdGlvblV0aWwgfSBmcm9tIFwiLi9hcHAtdXRpbFwiO1xyXG5pbXBvcnQgeyBSZWFjdGl2ZUZvcm1Db25maWcgfSBmcm9tIFwiLi9yZWFjdGl2ZS1mb3JtLWNvbmZpZ1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE9iamVjdE1ha2Vye1xyXG4gICAgc3RhdGljIGxhbmd1YWdlOiBzdHJpbmcgPSBcIlwiO1xyXG4gICAgc3RhdGljIHRvSnNvbihrZXk6IHN0cmluZywgY29uZmlnOiBhbnksIHZhbHVlczogYW55LGFkZGl0aW9uYWw6e21pbj86YW55LG1heD86YW55fT17fSkge1xyXG4gICAgICAgIE9iamVjdE1ha2VyLnNldE1lc3NhZ2UoKTtcclxuICAgICAgICBsZXQgbWVzc2FnZSA9IGNvbmZpZyA/IGNvbmZpZy5tZXNzYWdlIDogbnVsbDtcclxuICAgICAgICBsZXQgbWVzc2FnZUtleSA9IHVuZGVmaW5lZDtcclxuICAgICAgICBpZighbWVzc2FnZSAmJiBjb25maWcgJiYgY29uZmlnLm1lc3NhZ2VLZXkpXHJcbiAgICAgICAgICAgIG1lc3NhZ2VLZXkgPSBjb25maWcubWVzc2FnZUtleTtcclxuICAgICAgICBsZXQgbWVzc2FnZVRleHQgPSAobWVzc2FnZSkgPyBtZXNzYWdlIDogKFJlYWN0aXZlRm9ybUNvbmZpZyAmJiBSZWFjdGl2ZUZvcm1Db25maWcuanNvbiAmJiBSZWFjdGl2ZUZvcm1Db25maWcuanNvbi52YWxpZGF0aW9uTWVzc2FnZSAmJiBSZWFjdGl2ZUZvcm1Db25maWcuanNvbi52YWxpZGF0aW9uTWVzc2FnZVttZXNzYWdlS2V5IHx8IGtleV0pPyBSZWFjdGl2ZUZvcm1Db25maWcuanNvbi52YWxpZGF0aW9uTWVzc2FnZVttZXNzYWdlS2V5IHx8IGtleV0gOiAnJztcclxuICAgICAgICB2YWx1ZXMuZm9yRWFjaCgodCwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSBcclxuICAgICAgICAgICAgICAgIHQgPSB0aGlzLmdldERhdGVTdHJpbmcodCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VUZXh0ID0gbWVzc2FnZVRleHQucmVwbGFjZShge3ske2luZGV4fX19YCwgdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYoY29uZmlnICYmIGNvbmZpZy5tZXNzYWdlTmV4dXMpXHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKGNvbmZpZy5tZXNzYWdlTmV4dXMpLmZvckVhY2gocHJvcE5hbWU9PntcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VUZXh0ID0gbWVzc2FnZVRleHQucmVwbGFjZShge3ske3Byb3BOYW1lfX19YCwgY29uZmlnLm1lc3NhZ2VOZXh1c1twcm9wTmFtZV0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIGxldCBqT2JqZWN0OmFueSA9IHt9O1xyXG4gICAgICAgIGpPYmplY3Rba2V5XSA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZVRleHQsIHJlZlZhbHVlczogdmFsdWVzXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoY29uZmlnICYmIGNvbmZpZy5pc0FkZE1lc3NhZ2VLZXkpXHJcbiAgICAgICAgICAgIGpPYmplY3RbXCJtZXNzYWdlS2V5XCJdID0gbWVzc2FnZUtleTtcclxuICAgICAgICBpZihhZGRpdGlvbmFsKXtcclxuICAgICAgICAgICAgaWYoYWRkaXRpb25hbC5taW4pXHJcbiAgICAgICAgICAgICAgICBqT2JqZWN0W2tleV0ubWluID0gYWRkaXRpb25hbC5taW47XHJcbiAgICAgICAgICAgIGlmKGFkZGl0aW9uYWwubWF4KVxyXG4gICAgICAgICAgICAgICAgak9iamVjdFtrZXldLm1heCA9IGFkZGl0aW9uYWwubWF4O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gak9iamVjdDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBudWxsKCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRQYXNzd29yZE1lc3NhZ2UoKSB7XHJcbiAgICAgICAgbGV0IG1lc3NhZ2VLZXkgPSBcInBhc3N3b3JkXCI7XHJcbiAgICAgICAgcmV0dXJuIChSZWFjdGl2ZUZvcm1Db25maWcgJiYgUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24gJiYgUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24udmFsaWRhdGlvbk1lc3NhZ2UgJiYgUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24udmFsaWRhdGlvbk1lc3NhZ2VbbWVzc2FnZUtleV0pID8gUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24udmFsaWRhdGlvbk1lc3NhZ2VbbWVzc2FnZUtleV0gOiAnJ1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBzZXRNZXNzYWdlKCkge1xyXG4gICAgICAgIGlmIChSZWFjdGl2ZUZvcm1Db25maWcuaTE4biAmJiBSZWFjdGl2ZUZvcm1Db25maWcuaTE4bi52YWxpZGF0aW9uTWVzc2FnZSAmJiBPYmplY3RNYWtlci5sYW5ndWFnZSAhPT0gUmVhY3RpdmVGb3JtQ29uZmlnLmkxOG4ubGFuZ3VhZ2UpIHtcclxuICAgICAgICAgICAgaWYgKCFSZWFjdGl2ZUZvcm1Db25maWcuanNvbilcclxuICAgICAgICAgICAgICAgIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uID0ge307XHJcbiAgICAgICAgICAgIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uLnZhbGlkYXRpb25NZXNzYWdlID0gUmVhY3RpdmVGb3JtQ29uZmlnLmkxOG4udmFsaWRhdGlvbk1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgT2JqZWN0TWFrZXIubGFuZ3VhZ2UgPSBSZWFjdGl2ZUZvcm1Db25maWcuaTE4bi5sYW5ndWFnZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldERhdGVTdHJpbmcodmFsdWU6IERhdGUpIHtcclxuICAgICAgICBsZXQgc2VwZXJhdG9yID0gUmVhY3RpdmVGb3JtQ29uZmlnICYmIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uICYmIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uLmJhc2VDb25maWcgJiYgUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24uYmFzZUNvbmZpZy5zZXBlcmF0b3IgPyBSZWFjdGl2ZUZvcm1Db25maWcuanNvbi5iYXNlQ29uZmlnLnNlcGVyYXRvciA6IFwiL1wiO1xyXG4gICAgICAgIGxldCBkYXRlRm9ybWF0ID0gUmVhY3RpdmVGb3JtQ29uZmlnICYmIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uICYmIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uLmJhc2VDb25maWcgJiYgUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24uYmFzZUNvbmZpZy5kYXRlRm9ybWF0ID8gUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24uYmFzZUNvbmZpZy5kYXRlRm9ybWF0IDogXCJtZHlcIjtcclxuICAgICAgICBpZiAoUmVhY3RpdmVGb3JtQ29uZmlnICYmIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uICYmIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uLmludGVybmF0aW9uYWxpemF0aW9uICYmIFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uLmludGVybmF0aW9uYWxpemF0aW9uLmRhdGVGb3JtYXQgJiYgUmVhY3RpdmVGb3JtQ29uZmlnLmpzb24uaW50ZXJuYXRpb25hbGl6YXRpb24uc2VwZXJhdG9yKSB7XHJcbiAgICAgICAgICAgIHNlcGVyYXRvciA9IFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uLmludGVybmF0aW9uYWxpemF0aW9uLnNlcGVyYXRvcjtcclxuICAgICAgICAgICAgZGF0ZUZvcm1hdCA9IFJlYWN0aXZlRm9ybUNvbmZpZy5qc29uLmludGVybmF0aW9uYWxpemF0aW9uLmRhdGVGb3JtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHQ6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIGxldCB5ZWFyID0gdmFsdWUuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpO1xyXG4gICAgICAgIGxldCBtb250aCA9IFN0cmluZyh2YWx1ZS5nZXRNb250aCgpICsgMSk7XHJcbiAgICAgICAgbGV0IGRheSA9IFN0cmluZyh2YWx1ZS5nZXREYXkoKSk7XHJcbiAgICAgICAgc3dpdGNoIChkYXRlRm9ybWF0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3ltZCc6XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBcIlwiLmNvbmNhdCh5ZWFyLCBzZXBlcmF0b3IsIG1vbnRoLCBzZXBlcmF0b3IsIGRheSlcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdkbXknOlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gXCJcIi5jb25jYXQoZGF5LCBzZXBlcmF0b3IsIG1vbnRoLCBzZXBlcmF0b3IsIHllYXIpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnbWR5JzpcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IFwiXCIuY29uY2F0KG1vbnRoLCBzZXBlcmF0b3IsIGRheSwgc2VwZXJhdG9yLCB5ZWFyKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuIl19